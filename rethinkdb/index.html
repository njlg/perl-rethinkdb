<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport" content="width=device-width">
    <title>Rethinkdb - Perl RethinkDB
    </title>
    <link rel="stylesheet" href="http://fonts.googleapis.com/css?family=Lora:400,700,400italic,700italic|Anonymous+Pro:400,700,400italic,700italic|Merriweather:400,700,300">
    <link rel="stylesheet" href="http://njlg.github.io/perl-rethinkdb/css/main.css">
  </head>
  <body class="article-detail">
    <header class="header">
      <div class="content-wrap">
        <div class="logo">
          <h1><a href="http://njlg.github.io/perl-rethinkdb">Perl RethinkDB</a></h1>
          <p class="description">A Pure Perl RethinkDB Driver</p>
        </div>
      </div>
    </header>
    <div id="content">
      <div class="content-wrap">
        <div class="row">
          <div class="sidebar">
            <nav role="complementary" data-spy="affix" data-offset-top="250" data-offset-bottom="175"><ul class="nav">
<li class="active"><a href="#rethinkdb">Rethinkdb</a><ul>
<li><a href="#attributes">ATTRIBUTES</a><ul>
<li><a href="#io">io</a></li>
<li><a href="#term">term</a></li>
</ul>
</li>
<li><a href="#methods">METHODS</a><ul>
<li><a href="#r">r</a></li>
<li><a href="#connect">connect</a></li>
<li><a href="#db_create">db_create</a></li>
<li><a href="#db_drop">db_drop</a></li>
<li><a href="#db_list">db_list</a></li>
<li><a href="#db">db</a></li>
<li><a href="#table">table</a></li>
<li><a href="#row">row</a></li>
<li><a href="#literal">literal</a></li>
<li><a href="#object">object</a></li>
<li><a href="#and">and</a></li>
<li><a href="#or">or</a></li>
<li><a href="#random">random</a></li>
<li><a href="#now">now</a></li>
<li><a href="#time">time</a></li>
<li><a href="#epoch_time">epoch_time</a></li>
<li><a href="#iso8601">iso8601</a></li>
<li><a href="#monday">monday</a></li>
<li><a href="#tuesday">tuesday</a></li>
<li><a href="#wednesday">wednesday</a></li>
<li><a href="#thursday">thursday</a></li>
<li><a href="#friday">friday</a></li>
<li><a href="#saturday">saturday</a></li>
<li><a href="#sunday">sunday</a></li>
<li><a href="#january">january</a></li>
<li><a href="#february">february</a></li>
<li><a href="#march">march</a></li>
<li><a href="#april">april</a></li>
<li><a href="#may">may</a></li>
<li><a href="#june">june</a></li>
<li><a href="#july">july</a></li>
<li><a href="#august">august</a></li>
<li><a href="#september">september</a></li>
<li><a href="#october">october</a></li>
<li><a href="#november">november</a></li>
<li><a href="#december">december</a></li>
<li><a href="#args">args</a></li>
<li><a href="#do">do</a></li>
<li><a href="#branch">branch</a></li>
<li><a href="#error">error</a></li>
<li><a href="#expr">expr</a></li>
<li><a href="#js">js</a></li>
<li><a href="#json">json</a></li>
<li><a href="#http">http</a></li>
<li><a href="#uuid">uuid</a></li>
<li><a href="#asc">asc</a></li>
<li><a href="#desc">desc</a></li>
<li><a href="#true">true</a></li>
<li><a href="#false">false</a></li>
</ul>
</li>
</ul>
</li>
</ul>

            </nav>
          </div>
          <article role="main" class="article">
            <section class="content"><h1 id="rethinkdb">Rethinkdb</h1>
<p>Rethinkdb enables Perl programs to interact with RethinkDB in a easy-to-use way. This particular driver is based on the official Python, Javascript, and Ruby drivers.  To learn more about RethinkDB take a look at the official&nbsp;documentation.</p>
<pre><code class="lang-perl"><span class="keyword">package</span> MyApp;
<span class="keyword">use</span> Rethinkdb;

r-&gt;<span class="keyword">connect</span>-&gt;repl;
r-&gt;table(<span class="string">'agents'</span>)-&gt;get(<span class="string">'007'</span>)-&gt;update(
  r-&gt;branch(
    r-&gt;row-&gt;attr(<span class="string">'in_centrifuge'</span>),
    {<span class="string">'expectation'</span>: <span class="string">'death'</span>},
    {}
  )
)-&gt;run;
</code></pre>
<h2 id="attributes"><span class="caps">ATTRIBUTES</span></h2>
<p><a href="/packages/rethinkdb">Rethinkdb</a> implements the following&nbsp;attributes.</p>
<h3 id="io">io</h3>
<pre><code class="lang-perl"><span class="keyword">my</span> <span class="variable">$io</span> = r-&gt;io;
r-&gt;io(Rethinkdb::<span class="caps">IO</span>-&gt;new);
</code></pre>
<p>The <code>io</code> attribute returns the current <a href="/packages/rethinkdb/io">Rethinkdb::<span class="caps">IO</span></a> instance that
<a href="/packages/rethinkdb">Rethinkdb</a> is currently set to use. If <code>io</code> is not set by the time <code>run</code>
is called, then an error will&nbsp;occur.</p>
<h3 id="term">term</h3>
<pre><code class="lang-perl"><span class="keyword">my</span> <span class="variable">$term</span> = r-&gt;term;
</code></pre>
<p>The <code>term</code> attribute returns an instance of the RethinkDB Query Langague&nbsp;protocol.</p>
<h2 id="methods"><span class="caps">METHODS</span></h2>
<p><a href="/packages/rethinkdb">Rethinkdb</a> inherits all methods from <a href="/packages/rethinkdb/base">Rethinkdb::Base</a> and implements the
following&nbsp;methods.</p>
<h3 id="r">r</h3>
<pre><code class="lang-perl"><span class="keyword">my</span> <span class="variable">$r</span> = r;
<span class="keyword">my</span> <span class="variable">$conn</span> = r-&gt;<span class="keyword">connect</span>;
</code></pre>
<p><code>r</code> is a factory method to begin a new Rethink <span class="caps">DB</span> query. The <code>r</code> sub is
exported in the importer’s namespace so that it can be used as short-hand;
similar to what the official drivers provide. In addition, to creating a
new instance, if a <a href="/packages/rethinkdb/io">Rethinkdb::<span class="caps">IO</span></a> connection has been repl-ized, then that
connection will be set via <code>io</code> in the new&nbsp;instance.</p>
<h3 id="connect">connect</h3>
<pre><code class="lang-perl"><span class="keyword">my</span> <span class="variable">$conn1</span> = r-&gt;<span class="keyword">connect</span>;
<span class="keyword">my</span> <span class="variable">$conn2</span> = r-&gt;<span class="keyword">connect</span>(<span class="string">'localhost'</span>, <span class="number">28015</span>, <span class="string">'test'</span>, <span class="string">'auth_key'</span>, <span class="number">20</span>);
</code></pre>
<p>Create a new connection to a RethinkDB shard. Creating a connection tries to
contact the RethinkDB shard immediately and will fail if the connection&nbsp;fails.</p>
<h3 id="db_create">db_create</h3>
<pre><code class="lang-perl">r-&gt;db_create(<span class="string">'test'</span>)-&gt;run;
</code></pre>
<p>Create a database. A RethinkDB database is a collection of tables, similar to
relational&nbsp;databases.</p>
<h3 id="db_drop">db_drop</h3>
<pre><code class="lang-perl">r-&gt;db_drop(<span class="string">'test'</span>)-&gt;run;
</code></pre>
<p>Drop a database. The database, all its tables, and corresponding data will be&nbsp;deleted.</p>
<h3 id="db_list">db_list</h3>
<pre><code class="lang-perl">r-&gt;db_list-&gt;run;
</code></pre>
<p>List all database names in the&nbsp;system.</p>
<h3 id="db">db</h3>
<pre><code class="lang-perl">r-&gt;db(<span class="string">'irl'</span>)-&gt;table(<span class="string">'marvel'</span>)-&gt;run;
</code></pre>
<p>Reference a&nbsp;database.</p>
<h3 id="table">table</h3>
<pre><code class="lang-perl">r-&gt;table(<span class="string">'marvel'</span>)-&gt;run;
r-&gt;table(<span class="string">'marvel'</span>, <span class="number">1</span>)-&gt;run;
r-&gt;table(<span class="string">'marvel'</span>)-&gt;get(<span class="string">'Iron Man'</span>)-&gt;run;
r-&gt;table(<span class="string">'marvel'</span>, r-&gt;true)-&gt;get(<span class="string">'Iron Man'</span>)-&gt;run;
</code></pre>
<p>Select all documents in a table. This command can be chained with other
commands to do further processing on the&nbsp;data.</p>
<h3 id="row">row</h3>
<pre><code class="lang-perl">r-&gt;table(<span class="string">'users'</span>)-&gt;filter(r-&gt;row-&gt;attr(<span class="string">'age'</span>)-&gt;<span class="keyword">lt</span>(<span class="number">5</span>))-&gt;run;
r-&gt;table(<span class="string">'users'</span>)-&gt;filter(
  r-&gt;row-&gt;attr(<span class="string">'embedded_doc'</span>)-&gt;attr(<span class="string">'child'</span>)-&gt;<span class="keyword">gt</span>(<span class="number">5</span>)
)-&gt;run;
r-&gt;expr([<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>])-&gt;<span class="keyword">map</span>(r-&gt;row-&gt;add(<span class="number">1</span>))-&gt;run;
r-&gt;table(<span class="string">'users'</span>)-&gt;filter(<span class="sub"><span class="keyword">sub</span> {</span>
  <span class="keyword">my</span> <span class="variable">$row</span> = <span class="keyword">shift</span>;
  <span class="variable">$row</span>-&gt;attr(<span class="string">'name'</span>)-&gt;e<span class="string">q(r-&gt;table('prizes')</span>-&gt;get(<span class="string">'winner'</span>));
})-&gt;run;
</code></pre>
<p>Returns the currently visited&nbsp;document.</p>
<h3 id="literal">literal</h3>
<pre><code class="lang-perl">r-&gt;table(<span class="string">'users'</span>)-&gt;get(<span class="number">1</span>)-&gt;update({
  data: r-&gt;literal({ <span class="string">age =&gt;</span> <span class="number">19</span>, <span class="string">job =&gt;</span> <span class="string">'Engineer'</span> })
})-&gt;run;
</code></pre>
<p>Replace an object in a field instead of merging it with an existing object in a
merge or update&nbsp;operation.</p>
<h3 id="object">object</h3>
<pre><code class="lang-perl">r-&gt;object(<span class="string">'id'</span>, <span class="number">5</span>, <span class="string">'data'</span>, [<span class="string">'foo'</span>, <span class="string">'bar'</span>])-&gt;run;
</code></pre>
<p>Creates an object from a list of key-value pairs, where the keys must be
strings. <code>r.object(A, B, C, D)</code> is equivalent to
<code>r.expr([[A, B], [C, D]]).coerce_to(&#39;OBJECT&#39;)</code>.</p>
<h3 id="and">and</h3>
<pre><code class="lang-perl">r-&gt;<span class="keyword">and</span>(true, false)-&gt;run;
</code></pre>
<p>Compute the logical “and” of two or more&nbsp;values.</p>
<h3 id="or">or</h3>
<pre><code class="lang-perl">r-&gt;<span class="keyword">or</span>(true, false)-&gt;run;
</code></pre>
<p>Compute the logical “or” of two or more&nbsp;values.</p>
<h3 id="random">random</h3>
<pre><code class="lang-perl">r-&gt;random()
r-&gt;random(number[, number], {<span class="string">float =&gt;</span> true})
r-&gt;random(integer[, integer])
</code></pre>
<p>Generate a random number between given (or implied) bounds. <code>random</code> takes
zero, one or two&nbsp;arguments.</p>
<h3 id="now">now</h3>
<pre><code class="lang-perl">r-&gt;table(<span class="string">"users"</span>)-&gt;insert({
  <span class="string">name =&gt;</span> <span class="string">"John"</span>,
  <span class="string">subscription_date =&gt;</span> r-&gt;now()
})-&gt;run(<span class="variable">$conn</span>);
</code></pre>
<p>Return a time object representing the current time in <span class="caps">UTC</span>. The command <code>now()</code>
is computed once when the server receives the query, so multiple instances of
<code>r.now()</code> will always return the same time inside a&nbsp;query.</p>
<h3 id="time">time</h3>
<pre><code class="lang-perl">r-&gt;table(<span class="string">'user'</span>)-&gt;get(<span class="string">'John'</span>)-&gt;update({
  <span class="string">birthdate =&gt;</span> r-&gt;<span class="keyword">time</span>(<span class="number">1986</span>, <span class="number">11</span>, <span class="number">3</span>, <span class="string">'Z'</span>)
})-&gt;run;
</code></pre>
<p>Create a time object for a specific&nbsp;time.</p>
<h3 id="epoch_time">epoch_time</h3>
<pre><code class="lang-perl">r-&gt;table(<span class="string">'user'</span>)-&gt;get(<span class="string">'John'</span>)-&gt;update({
  <span class="string">"birthdate"</span> =&gt; r-&gt;epoch_time(<span class="number">531360000</span>)
})-&gt;run;
</code></pre>
<p>Create a time object based on seconds since epoch. The first argument is a
double and will be rounded to three decimal places&nbsp;(millisecond-precision).</p>
<h3 id="iso8601">iso8601</h3>
<pre><code class="lang-perl">r-&gt;table(<span class="string">'user'</span>)-&gt;get(<span class="string">'John'</span>)-&gt;update({
  <span class="string">birth =&gt;</span> r-&gt;iso8601(<span class="string">'1986-11-03T08:30:00-07:00'</span>)
})-&gt;run;
</code></pre>
<p>Create a time object based on an <span class="caps">ISO</span> 8601 date-time string
(e.g. ‘2013-01-01T01:01:01+00:00’). We support all valid ISO 8601 formats
except for week dates. If you pass an ISO 8601 date-time without a time zone,
you must specify the time zone with the default_timezone argument. Read more
about the ISO 8601 format at <a href="http://en.wikipedia.org/wiki/ISO_8601">Wikipedia</a>.</p>
<h3 id="monday">monday</h3>
<pre><code class="lang-perl">r-&gt;table(<span class="string">'users'</span>)-&gt;filter(
  r-&gt;row(<span class="string">'birthdate'</span>)-&gt;day_of_week()-&gt;e<span class="string">q(r-&gt;monday)</span>
)-&gt;run;
</code></pre>
<p><a href="/rethinkdb/#monday">“monday”</a> is a literal day of the week for&nbsp;comparisions.</p>
<h3 id="tuesday">tuesday</h3>
<pre><code class="lang-perl">r-&gt;table(<span class="string">'users'</span>)-&gt;filter(
  r-&gt;row(<span class="string">'birthdate'</span>)-&gt;day_of_week()-&gt;e<span class="string">q(r-&gt;tuesday)</span>
)-&gt;run;
</code></pre>
<p><a href="/rethinkdb/#tuesday">“tuesday”</a> is a literal day of the week for&nbsp;comparisions.</p>
<h3 id="wednesday">wednesday</h3>
<pre><code class="lang-perl">r-&gt;table(<span class="string">'users'</span>)-&gt;filter(
  r-&gt;row(<span class="string">'birthdate'</span>)-&gt;day_of_week()-&gt;e<span class="string">q(r-&gt;wednesday)</span>
)-&gt;run;
</code></pre>
<p><a href="/rethinkdb/#wednesday">“wednesday”</a> is a literal day of the week for&nbsp;comparisions.</p>
<h3 id="thursday">thursday</h3>
<pre><code class="lang-perl">r-&gt;table(<span class="string">'users'</span>)-&gt;filter(
  r-&gt;row(<span class="string">'birthdate'</span>)-&gt;day_of_week()-&gt;e<span class="string">q(r-&gt;thursday)</span>
)-&gt;run;
</code></pre>
<p><a href="/packages/thursday">thursday</a> is a literal day of the week for&nbsp;comparisions.</p>
<h3 id="friday">friday</h3>
<pre><code class="lang-perl">r-&gt;table(<span class="string">'users'</span>)-&gt;filter(
  r-&gt;row(<span class="string">'birthdate'</span>)-&gt;day_of_week()-&gt;e<span class="string">q(r-&gt;friday)</span>
)-&gt;run;
</code></pre>
<p><a href="/rethinkdb/#friday">“friday”</a> is a literal day of the week for&nbsp;comparisions.</p>
<h3 id="saturday">saturday</h3>
<pre><code class="lang-perl">r-&gt;table(<span class="string">'users'</span>)-&gt;filter(
  r-&gt;row(<span class="string">'birthdate'</span>)-&gt;day_of_week()-&gt;e<span class="string">q(r-&gt;saturday)</span>
)-&gt;run;
</code></pre>
<p><a href="/rethinkdb/#saturday">“saturday”</a> is a literal day of the week for&nbsp;comparisions.</p>
<h3 id="sunday">sunday</h3>
<pre><code class="lang-perl">r-&gt;table(<span class="string">'users'</span>)-&gt;filter(
  r-&gt;row(<span class="string">'birthdate'</span>)-&gt;day_of_week()-&gt;e<span class="string">q(r-&gt;sunday)</span>
)-&gt;run;
</code></pre>
<p><a href="/rethinkdb/#sunday">“sunday”</a> is a literal day of the week for&nbsp;comparisions.</p>
<h3 id="january">january</h3>
<pre><code class="lang-perl">r-&gt;table(<span class="string">'users'</span>)-&gt;filter(
  r-&gt;row(<span class="string">'birthdate'</span>)-&gt;month()-&gt;e<span class="string">q(r-&gt;january)</span>
)-&gt;run;
</code></pre>
<p><a href="/rethinkdb/#january">“january”</a> is a literal month for&nbsp;comparisions.</p>
<h3 id="february">february</h3>
<pre><code class="lang-perl">r-&gt;table(<span class="string">'users'</span>)-&gt;filter(
  r-&gt;row(<span class="string">'birthdate'</span>)-&gt;month()-&gt;e<span class="string">q(r-&gt;february)</span>
)-&gt;run;
</code></pre>
<p><a href="/rethinkdb/#february">“february”</a> is a literal month for&nbsp;comparisions.</p>
<h3 id="march">march</h3>
<pre><code class="lang-perl">r-&gt;table(<span class="string">'users'</span>)-&gt;filter(
  r-&gt;row(<span class="string">'birthdate'</span>)-&gt;month()-&gt;e<span class="string">q(r-&gt;march)</span>
)-&gt;run;
</code></pre>
<p><a href="/rethinkdb/#march">“march”</a> is a literal month for&nbsp;comparisions.</p>
<h3 id="april">april</h3>
<pre><code class="lang-perl">r-&gt;table(<span class="string">'users'</span>)-&gt;filter(
  r-&gt;row(<span class="string">'birthdate'</span>)-&gt;month()-&gt;e<span class="string">q(r-&gt;april)</span>
)-&gt;run;
</code></pre>
<p><a href="/rethinkdb/#april">“april”</a> is a literal month for&nbsp;comparisions.</p>
<h3 id="may">may</h3>
<pre><code class="lang-perl">r-&gt;table(<span class="string">'users'</span>)-&gt;filter(
  r-&gt;row(<span class="string">'birthdate'</span>)-&gt;month()-&gt;e<span class="string">q(r-&gt;may)</span>
)-&gt;run;
</code></pre>
<p><a href="/rethinkdb/#may">“may”</a> is a literal month for&nbsp;comparisions.</p>
<h3 id="june">june</h3>
<pre><code class="lang-perl">r-&gt;table(<span class="string">'users'</span>)-&gt;filter(
  r-&gt;row(<span class="string">'birthdate'</span>)-&gt;month()-&gt;e<span class="string">q(r-&gt;june)</span>
)-&gt;run;
</code></pre>
<p><a href="/rethinkdb/#june">“june”</a> is a literal month for&nbsp;comparisions.</p>
<h3 id="july">july</h3>
<pre><code class="lang-perl">r-&gt;table(<span class="string">'users'</span>)-&gt;filter(
  r-&gt;row(<span class="string">'birthdate'</span>)-&gt;month()-&gt;e<span class="string">q(r-&gt;july)</span>
)-&gt;run;
</code></pre>
<p><a href="/rethinkdb/#july">“july”</a> is a literal month for&nbsp;comparisions.</p>
<h3 id="august">august</h3>
<pre><code class="lang-perl">r-&gt;table(<span class="string">'users'</span>)-&gt;filter(
  r-&gt;row(<span class="string">'birthdate'</span>)-&gt;month()-&gt;e<span class="string">q(r-&gt;august)</span>
)-&gt;run;
</code></pre>
<p><a href="/rethinkdb/#august">“august”</a> is a literal month for&nbsp;comparisions.</p>
<h3 id="september">september</h3>
<pre><code class="lang-perl">r-&gt;table(<span class="string">'users'</span>)-&gt;filter(
  r-&gt;row(<span class="string">'birthdate'</span>)-&gt;month()-&gt;e<span class="string">q(r-&gt;september)</span>
)-&gt;run;
</code></pre>
<p><a href="/rethinkdb/#september">“september”</a> is a literal month for&nbsp;comparisions.</p>
<h3 id="october">october</h3>
<pre><code class="lang-perl">r-&gt;table(<span class="string">'users'</span>)-&gt;filter(
  r-&gt;row(<span class="string">'birthdate'</span>)-&gt;month()-&gt;e<span class="string">q(r-&gt;october)</span>
)-&gt;run;
</code></pre>
<p><a href="/rethinkdb/#october">“october”</a> is a literal month for&nbsp;comparisions.</p>
<h3 id="november">november</h3>
<pre><code class="lang-perl">r-&gt;table(<span class="string">'users'</span>)-&gt;filter(
  r-&gt;row(<span class="string">'birthdate'</span>)-&gt;month()-&gt;e<span class="string">q(r-&gt;november)</span>
)-&gt;run;
</code></pre>
<p><a href="/rethinkdb/#november">“november”</a> is a literal month for&nbsp;comparisions.</p>
<h3 id="december">december</h3>
<pre><code class="lang-perl">r-&gt;table(<span class="string">'users'</span>)-&gt;filter(
  r-&gt;row(<span class="string">'birthdate'</span>)-&gt;month()-&gt;e<span class="string">q(r-&gt;december)</span>
)-&gt;run;
</code></pre>
<p><a href="/rethinkdb/#december">“december”</a> is a literal month for&nbsp;comparisions.</p>
<h3 id="args">args</h3>
<pre><code class="lang-perl">r-&gt;table(<span class="string">'people'</span>)-&gt;get_all(<span class="string">'Alice'</span>, <span class="string">'Bob'</span>)-&gt;run;
<span class="comment"># or</span>
r-&gt;table(<span class="string">'people'</span>)-&gt;get_all(r-&gt;args([<span class="string">'Alice'</span>, <span class="string">'Bob'</span>]))-&gt;run;
</code></pre>
<p><code>r-&gt;args</code> is a special term that’s used to splice an array of arguments into
another term. This is useful when you want to call a variadic term such as
<a href="/packages/rethinkdb/query/table#get_all">“get_all” in Rethinkdb::Query::Table</a> with a set of arguments produced at&nbsp;runtime.</p>
<h3 id="do">do</h3>
<pre><code class="lang-perl">r-&gt;<span class="keyword">do</span>(r-&gt;table(<span class="string">'marvel'</span>)-&gt;get(<span class="string">'IronMan'</span>), <span class="sub"><span class="keyword">sub</span> {</span>
  <span class="keyword">my</span> <span class="variable">$ironman</span> = <span class="keyword">shift</span>;
  <span class="keyword">return</span> <span class="variable">$ironman</span>-&gt;attr(<span class="string">'name'</span>);
})-&gt;run;
</code></pre>
<p>Evaluate the expr in the context of one or more value bindings. The type of
the result is the type of the value returned from&nbsp;expr.</p>
<h3 id="branch">branch</h3>
<pre><code class="lang-perl">r-&gt;table(<span class="string">'marvel'</span>)-&gt;<span class="keyword">map</span>(
  r-&gt;branch(
    r-&gt;row-&gt;attr(<span class="string">'victories'</span>)-&gt;<span class="keyword">lt</span>(<span class="number">100</span>),
    r-&gt;row-&gt;attr(<span class="string">'name'</span>)-&gt;add(<span class="string">' is a superhero'</span>),
    r-&gt;row-&gt;attr(<span class="string">'name'</span>)-&gt;add(<span class="string">' is a hero'</span>)
  )
)-&gt;run;
</code></pre>
<p>Evaluate one of two control paths based on the value of an expression. <code>branch</code>
is effectively an <code>if</code> renamed due to language constraints. The type of the
result is determined by the type of the branch that gets&nbsp;executed.</p>
<h3 id="error">error</h3>
<pre><code class="lang-perl">r-&gt;table(<span class="string">'marvel'</span>)-&gt;get(<span class="string">'IronMan'</span>)-&gt;<span class="keyword">do</span>(<span class="sub"><span class="keyword">sub</span> {</span>
  <span class="keyword">my</span> <span class="variable">$ironman</span> = <span class="keyword">shift</span>;
  r-&gt;branch(
    <span class="variable">$ironman</span>-&gt;attr(<span class="string">'victories'</span>)-&gt;<span class="keyword">lt</span>(<span class="variable">$ironman</span>-&gt;attr(<span class="string">'battles'</span>)),
    r-&gt;error(<span class="string">'impossible code path'</span>),
    <span class="variable">$ironman</span>
  );
})-&gt;run;
</code></pre>
<p>Throw a runtime error. If called with no arguments inside the second argument
to default, re-throw the current&nbsp;error.</p>
<h3 id="expr">expr</h3>
<pre><code class="lang-perl">r-&gt;expr({<span class="string">a =&gt;</span> <span class="string">'b'</span>})-&gt;merge({<span class="string">b =&gt;</span> [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>]})-&gt;run(<span class="variable">$conn</span>);
</code></pre>
<p>Construct a <span class="caps">RQL</span> JSON object from a native&nbsp;object.</p>
<h3 id="js">js</h3>
<pre><code class="lang-perl">r-&gt;js(<span class="string">"'str1' + 'str2'"</span>)-&gt;run(<span class="variable">$conn</span>);
r-&gt;table(<span class="string">'marvel'</span>)-&gt;filter(
  r-&gt;js(<span class="string">'(function (row) { return row.age &gt; 90; })'</span>)
)-&gt;run(<span class="variable">$conn</span>);
r-&gt;js(<span class="string">'while(true) {}'</span>, <span class="number">1.3</span>)-&gt;run(<span class="variable">$conn</span>);
</code></pre>
<p>Create a javascript&nbsp;expression.</p>
<h3 id="json">json</h3>
<pre><code class="lang-perl">r-&gt;json(<span class="string">"[1,2,3]"</span>)-&gt;run(<span class="variable">$conn</span>);
</code></pre>
<p>Parse a <span class="caps">JSON</span> string on the&nbsp;server.</p>
<h3 id="http">http</h3>
<pre><code class="lang-perl">r-&gt;table(<span class="string">'posts'</span>)-&gt;insert(r-&gt;http(<span class="string">'httpbin.org/get'</span>))-&gt;run;
r-&gt;http(<span class="string">'http://httpbin.org/post'</span>, {
  <span class="string">method =&gt;</span> <span class="string">'<span class="caps">POST</span>'</span>,
  <span class="string">data   =&gt;</span> {
    <span class="string">player =&gt;</span> <span class="string">'Bob'</span>,
    <span class="string">game   =&gt;</span> <span class="string">'tic tac toe'</span>
  }
})-&gt;run(<span class="variable">$conn</span>);
</code></pre>
<p>Retrieve data from the specified <span class="caps">URL</span> over HTTP. The return type depends on the
<code>result_format</code> option, which checks the <code>Content-Type</code> of the response by&nbsp;default.</p>
<h3 id="uuid">uuid</h3>
<pre><code class="lang-perl">r-&gt;uuid-&gt;run;
</code></pre>
<p>Return a <span class="caps">UUID</span> (universally unique identifier), a string that can be used as a
unique&nbsp;ID.</p>
<h3 id="asc">asc</h3>
<pre><code class="lang-perl">r-&gt;table(<span class="string">'marvel'</span>)-&gt;order_by(r-&gt;asc(<span class="string">'enemies_vanquished'</span>))-&gt;run;
</code></pre>
<p>Specifies that a column should be ordered in ascending&nbsp;order.</p>
<h3 id="desc">desc</h3>
<pre><code class="lang-perl">r-&gt;table(<span class="string">'marvel'</span>)-&gt;order_by(r-&gt;desc(<span class="string">'enemies_vanquished'</span>))-&gt;run;
</code></pre>
<p>Specifies that a column should be ordered in descending&nbsp;order.</p>
<h3 id="true">true</h3>
<pre><code class="lang-perl">r-&gt;true-&gt;run;
</code></pre>
<p>Helper literal since Perl does not have a <code>true</code> literal.</p>
<h3 id="false">false</h3>
<pre><code class="lang-perl">r-&gt;false-&gt;run;
</code></pre>
<p>Helper literal since Perl does not have a <code>false</code> literal.</p>
</section>
          </article>
        </div>
      </div>
    </div>
    <footer>
      <div class="content-wrap">
        <div class="nav"><a href="/">« Back</a><a href="#content" id="top">↑ Top</a></div>
        <section class="about"><p>Unless otherwise noted: Copyright &copy; 2013-2014, <a href="http://njlg.info">Nathan Levin-Greenhaw</a></p>
<p>A lot of the above documentation herein was taken from the
<a href="http://rethinkdb.com/api/">official documentation</a>.
Copyright &copy; 2010-2014 RethinkDB.</p>
<p>This program is free software, you can redistribute it and/or modify it under
the terms of the Artistic License version 2.0.</p>

        </section>
        <section class="copy">
          <p>
            &copy; 2015
            <a href="http://njlg.info">Nathan Levin-Greenhaw</a>
            &mdash; powered by
            <a href="https://github.com/jnordberg/wintersmith">Wintersmith</a>
          </p>
        </section>
      </div>
    </footer>
  </body>
</html>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.10.2/jquery.min.js"></script>
<script src="http://njlg.github.io/perl-rethinkdb/js/bootstrap.min.js"></script>
<script src="//cdnjs.cloudflare.com/ajax/libs/waypoints/2.0.5/waypoints.min.js"></script>
<script src="//cdnjs.cloudflare.com/ajax/libs/waypoints/2.0.5/shortcuts/sticky-elements/waypoints-sticky.min.js"></script>
<script src="http://njlg.github.io/perl-rethinkdb/js/p.js"></script>
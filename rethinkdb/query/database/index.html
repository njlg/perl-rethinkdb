<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport" content="width=device-width">
    <title>Rethinkdb::Query::Database - Perl RethinkDB
    </title>
    <link rel="stylesheet" href="http://fonts.googleapis.com/css?family=Lora:400,700,400italic,700italic|Anonymous+Pro:400,700,400italic,700italic|Merriweather:400,700,300">
    <link rel="stylesheet" href="http://njlg.github.io/perl-rethinkdb/css/main.css">
  </head>
  <body class="article-detail">
    <header class="header">
      <div class="content-wrap">
        <div class="logo">
          <h1><a href="http://njlg.github.io/perl-rethinkdb">Perl RethinkDB</a></h1>
          <p class="description">A Pure Perl RethinkDB Driver</p>
        </div>
      </div>
    </header>
    <div id="content">
      <div class="content-wrap">
        <div class="row">
          <div class="sidebar">
            <nav role="complementary" data-spy="affix" data-offset-top="250" data-offset-bottom="175"><ul class="nav">
<li class="active"><a href="#rethinkdb-query-database">Rethinkdb::Query:: Database</a><ul>
<li><a href="#attributes">ATTRIBUTES</a><ul>
<li><a href="#name">name</a></li>
</ul>
</li>
<li><a href="#methods">METHODS</a><ul>
<li><a href="#create">create</a></li>
<li><a href="#drop">drop</a></li>
<li><a href="#list">list</a></li>
<li><a href="#table">table</a></li>
<li><a href="#table_create">table_create</a></li>
<li><a href="#table_drop">table_drop</a></li>
<li><a href="#table_list">table_list</a></li>
<li><a href="#config">config</a></li>
<li><a href="#rebalance">rebalance</a></li>
<li><a href="#reconfigure">reconfigure</a></li>
<li><a href="#wait">wait</a></li>
</ul>
</li>
</ul>
</li>
</ul>

            </nav>
          </div>
          <article role="main" class="article">
            <section class="content"><h1 id="rethinkdb-query-database">Rethinkdb::Query::Database</h1>
<p>Rethinkdb::Query::Database is a type of query that represents a database. This classes contains methods to interact with a database or the underlying&nbsp;tables.</p>
<h2 id="attributes"><span class="caps">ATTRIBUTES</span></h2>
<p><a href="/perl-rethinkdb/rethinkdb/query/database">Rethinkdb::Query::Database</a> implements the following&nbsp;attributes.</p>
<h3 id="name">name</h3>
<pre><code class="lang-perl"><span class="keyword">my</span> <span class="variable">$db</span> = r-&gt;db(<span class="string">'better'</span>);
<span class="keyword">say</span> <span class="variable">$db</span>-&gt;name;
</code></pre>
<p>The name of the&nbsp;database.</p>
<h2 id="methods"><span class="caps">METHODS</span></h2>
<h3 id="create">create</h3>
<pre><code class="lang-perl">r-&gt;db(<span class="string">'test'</span>)-&gt;create(<span class="string">'superheroes'</span>)-&gt;run;
</code></pre>
<p>Create a database. A RethinkDB database is a collection of tables, similar to
relational&nbsp;databases.</p>
<p>If successful, the operation returns an object: <code>{created =&gt; 1}</code>. If a
database with the same name already exists the operation returns an
<code>runtime_error</code>.</p>
<p><strong>Note</strong>: that you can only use alphanumeric characters and underscores for the
database&nbsp;name.</p>
<h3 id="drop">drop</h3>
<pre><code class="lang-perl">r-&gt;db(<span class="string">'comics'</span>)-&gt;drop(<span class="string">'superheroes'</span>)-&gt;run;
</code></pre>
<p>Drop a database. The database, all its tables, and corresponding data will be&nbsp;deleted.</p>
<p>If successful, the operation returns the object <code>{dropped =&gt; 1}</code>. If the
specified database doesn’t exist a <code>runtime_error</code> will be&nbsp;returned.</p>
<h3 id="list">list</h3>
<pre><code class="lang-perl">r-&gt;db(<span class="string">'sillyStuff'</span>)-&gt;list-&gt;run;
</code></pre>
<p>List all database names in the system. The result is a list of&nbsp;strings.</p>
<h3 id="table">table</h3>
<pre><code class="lang-perl">r-&gt;db(<span class="string">'newStuff'</span>)-&gt;table(<span class="string">'weapons'</span>)-&gt;run;
</code></pre>
<p>Select all documents in a table from this database. This command can be chained
with other commands to do further processing on the&nbsp;data.</p>
<h3 id="table_create">table_create</h3>
<pre><code class="lang-perl">r-&gt;db(<span class="string">'test'</span>)-&gt;table_create(<span class="string">'dc_universe'</span>)-&gt;run;
</code></pre>
<p>Create a table. A RethinkDB table is a collection of <span class="caps">JSON</span>&nbsp;documents.</p>
<p>If successful, the operation returns an object: <code>{created =&gt; 1}</code>. If a
table with the same name already exists, the operation returns a
<code>runtime_error</code>.</p>
<p><strong>Note:</strong> that you can only use alphanumeric characters and underscores for the
table&nbsp;name.</p>
<h3 id="table_drop">table_drop</h3>
<pre><code class="lang-perl">r-&gt;db(<span class="string">'test'</span>)-&gt;table_drop(<span class="string">'dc_universe'</span>)-&gt;run;
</code></pre>
<p>Drop a table. The table and all its data will be&nbsp;deleted.</p>
<p>If successful, the operation returns an object: <code>{dropped =&gt; 1}</code>. If the
specified table doesn’t exist a <code>runtime_error</code> is&nbsp;returned.</p>
<h3 id="table_list">table_list</h3>
<pre><code class="lang-perl">r-&gt;db(<span class="string">'test'</span>)-&gt;table_list-&gt;run;
</code></pre>
<p>List all table names in a database. The result is a list of&nbsp;strings.</p>
<h3 id="config">config</h3>
<pre><code class="lang-perl">r-&gt;db(<span class="string">'test'</span>)-&gt;config-&gt;run;
</code></pre>
<p>Query (read and/or update) the configurations for individual&nbsp;databases.</p>
<h3 id="rebalance">rebalance</h3>
<pre><code class="lang-perl">r-&gt;db(<span class="string">'test'</span>)-&gt;rebalance-&gt;run;
</code></pre>
<p>Rebalances the shards of all tables in the&nbsp;database.</p>
<h3 id="reconfigure">reconfigure</h3>
<pre><code class="lang-perl">r-&gt;db(<span class="string">'test'</span>)-&gt;reconfigure({ <span class="string">shards =&gt;</span> <span class="number">2</span>, <span class="string">replicas =&gt;</span> <span class="number">1</span> })-&gt;run;
r-&gt;db(<span class="string">'test'</span>)-&gt;reconfigure(
  {
    <span class="string">shards              =&gt;</span> <span class="number">2</span>,
    <span class="string">replicas            =&gt;</span> { <span class="string">wooster =&gt;</span> <span class="number">1</span>, <span class="string">wayne =&gt;</span> <span class="number">1</span> },
    <span class="string">primary_replica_tag =&gt;</span> <span class="string">'wooster'</span>
  }
)-&gt;run;
</code></pre>
<p>Reconfigure all table’s sharding and&nbsp;replication.</p>
<h3 id="wait">wait</h3>
<pre><code class="lang-perl">r-&gt;db(<span class="string">'test'</span>)-&gt;<span class="keyword">wait</span>-&gt;run;
</code></pre>
<p>Wait for all the tables in a database to be ready. A table may be
temporarily unavailable after creation, rebalancing or reconfiguring.
The <a href="/perl-rethinkdb/rethinkdb/query/database/#wait">“wait”</a> command blocks until the given database is fully up to&nbsp;date.</p>
</section>
          </article>
        </div>
      </div>
    </div>
    <footer>
      <div class="content-wrap">
        <div class="nav"><a href="/perl-rethinkdb/">« Back</a><a href="#content" id="top">↑ Top</a></div>
        <section class="about"><p>Unless otherwise noted: Copyright &copy; 2013-2015, <a href="http://njlg.info">Nathan Levin-Greenhaw</a></p>
<p>A lot of the above documentation herein was taken from the
<a href="http://rethinkdb.com/api/">official documentation</a>.
Copyright &copy; 2010-2015 RethinkDB.</p>
<p>This program is free software, you can redistribute it and/or modify it under
the terms of the Artistic License version 2.0.</p>

        </section>
        <section class="copy">
          <p>
            &copy; 2015
            <a href="http://njlg.info">Nathan Levin-Greenhaw</a>
            &mdash; powered by
            <a href="https://github.com/jnordberg/wintersmith">Wintersmith</a>
          </p>
        </section>
      </div>
    </footer>
  </body>
</html>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.10.2/jquery.min.js"></script>
<script src="http://njlg.github.io/perl-rethinkdb/js/bootstrap.min.js"></script>
<script src="//cdnjs.cloudflare.com/ajax/libs/waypoints/2.0.5/waypoints.min.js"></script>
<script src="//cdnjs.cloudflare.com/ajax/libs/waypoints/2.0.5/shortcuts/sticky-elements/waypoints-sticky.min.js"></script>
<script src="http://njlg.github.io/perl-rethinkdb/js/p.js"></script>